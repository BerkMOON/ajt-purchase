## **奥吉通集团配件集采系统 PRD**

**版本：** 1.0
**日期：** 2024-09-20
**文档状态：** 草案
**撰写人：** 马煜珲

---

### 1. 项目概述

#### 1.1 项目背景

本集团目前车辆配件采购流程分散在各门店，通过Excel、邮件或电话等方式进行，存在以下问题：

* **效率低下：** 采购申请、审批、询价、下单环节割裂，沟通成本高。
* **不透明：** 采购状态、价格对比、供应商表现难以实时追踪和评估。
* **成本控制弱：** 缺乏统一的比价和议价机制，无法发挥集团采购的量价优势。
* **数据孤岛：** 采购数据分散，难以进行汇总分析，为决策提供支持。

#### 1.2 项目目标

构建一个统一的线上配件集采平台，旨在：

* **标准化流程：** 将采购流程线上化、标准化，减少人为错误和延迟。
* **提升效率：** 通过系统自动化流转（如审批、通知），缩短整体采购周期。
* **降低成本：** 通过集中询价、比价，筛选优质供应商，降低采购成本。
* **数据驱动决策：** 积累采购数据，为成本分析、供应商管理和库存优化提供数据支持。

#### 1.3 用户角色

| 角色                              | 核心职责                                                                                      | 系统权限                                               |
| :-------------------------------- | :-------------------------------------------------------------------------------------------- | :----------------------------------------------------- |
| **采购员**（各门店）        | - 创建、编辑、提交采购单 `<br>`- 查看自己创建的采购单状态 `<br>`- 比价并生成订单          | 核心用户，拥有采购单的创建、查看（本人）权限           |
| **采购审核员**（集团/区域） | - 审核各门店提交的采购单（合理性、必要性）`<br>`- 驳回或通过采购申请                        | 采购单审核权限，可查看所有待审核及历史审核单           |
| **供应商**                  | - 接收询价单 `<br>`- 在规定时间内进行报价 `<br>`- 查看已接订单状态                        | 外部门户用户，仅有与自身相关的询价、报价、订单查看权限 |
| **系统管理员**              | - 用户及角色管理 `<br>`- 基础数据维护（门店、配件目录、供应商信息）`<br>`- 系统配置与监控 | 最高权限，负责系统后台管理                             |

---

### 2. 功能需求

#### 2.1 采购单管理模块

##### 2.1.1 采购列表与筛选

* **功能描述：** 为用户提供一个总览视图，展示所有有权限查看的采购单。
* **需求详情：**
  1. **列表显示：** 列表需显示关键字段：采购单号、创建日期、采购门店、采购人、总金额、当前状态（如：草稿/待审核/待报价/已报价/已下单/已完成）。
  2. **筛选功能：** 列表上方提供筛选条件，至少包括：
     * 采购单号（精确/模糊搜索）
     * 采购日期范围（开始日期-结束日期）
     * 采购门店（下拉选择，多选）
     * 采购人（下拉选择）
     * 采购单状态（下拉选择，多选）
  3. **操作入口：** 列表右上方有醒目的 **【新建采购单】** 按钮。
  4. **查看详情：** 点击列表中的任一 **“采购单号”**，应跳转至该采购单的详情页面。

##### 2.1.2 采购单详情页

* **功能描述：** 展示采购单的所有信息及其完整流转记录。
* **需求详情：**
  1. **基本信息区：** 显示采购单号、创建人、创建门店、创建时间、期望到货日期、备注等。
  2. **配件清单区：** 以表格形式清晰列出所采购的配件详情，包括：配件编码、配件名称、规格型号、采购数量、单位、**历史采购均价**（参考用）。
  3. **状态流水区：** 以时间线形式展示采购单的完整生命周期，如：创建→提交→审核通过→已发送询价→供应商A报价→生成订单等，并记录每个环节的操作人和时间。
  4. **报价信息区（审核通过后可见）：** 展示各供应商的报价详情，用于比价。

#### 2.2 采购单创建与审核流程

##### 2.2.1 新建采购单

* **功能描述：** 采购员根据需求创建新的采购申请。
* **需求详情：**
  1. **表单填写：**
     * 系统自动生成唯一采购单号。
     * 自动填充当前用户及其所属门店。
     * 填写期望到货日期（必填）。
     * 可选择从模板创建或手动添加配件。
  2. **配件添加：**
     * 通过配件编码或名称搜索集团统一的配件库进行添加。
     * 填写所需数量。
     * 可批量导入配件清单（支持Excel模板）。
  3. **状态管理：**
     * 保存为 **【草稿】**：可随时修改，不会进入审批流。
     * 点击 **【提交】**：采购单状态变为 **【待审核】**，并通知审核员。提交后采购员不可再修改。

##### 2.2.2 采购单审核

* **功能描述：** 审核员对提交的采购单进行审批。
* **需求详情：**
  1. **待办提醒：** 审核员登录系统后，首页或有消息中心提示有待审核的采购单。
  2. **审核操作：** 在采购单详情页，审核员可：
     * **【通过】**：状态变为 **【审核通过/待询价】**。系统自动根据配件类别，向符合条件的供应商池发送询价通知。
     * **【驳回】**：必须填写驳回理由。状态变为 **【已驳回】**，并通知原采购员。采购员可根据理由修改后重新提交。

#### 2.3 询价与报价模块

* **功能描述：** 系统自动化处理审核通过后的询价和报价环节。
* **需求详情：**
  1. **自动询价：** 采购单审核通过后，系统根据预设规则（如配件分类对应首选供应商）自动生成询价单，并通过短信/邮件/供应商门户站内信通知相关供应商。
  2. **报价周期：** 为每个询价单设置报价截止时间。
  3. **供应商报价：** 供应商登录其外部门户，查看询价单详情，并在线填写报价（含单价、总价、预计交货期等）。
  4. **报价展示：** 所有报价在截止时间后，统一在采购单详情页的“报价信息区”对采购员可见，以便公平比价。

#### 2.4 比价与订单生成（新增核心环节）

* **功能描述：** 采购员基于报价结果，选择最优供应商并生成正式采购订单。
* **需求详情：**
  1. **比价界面：** 系统以清晰的方式（如表格）并列展示不同供应商的报价，并自动计算总价差异。
  2. **供应商选择：** 采购员综合考虑价格、交货期、供应商历史评级等因素，选择一家或多家供应商（可分拆订单）。
  3. **生成订单：** 点击 **【生成订单】**，系统将选中的报价信息转化为具有法律效力的正式采购订单，状态变为 **【已下单】**。
  4. **订单通知：** 系统自动将订单发送给对应供应商。

---

### 3. 非功能需求

* **性能：** 页面加载时间应小于3秒，关键操作（如查询、提交）响应时间小于2秒。
* **安全性：**
  * 基于角色的权限访问控制（RBAC），数据隔离（如A门店采购员不能查看B门店数据）。
  * 敏感操作（如审核、下单）需有日志记录。
  * 供应商外部门户与内部系统严格隔离。
* **可用性：** 界面简洁直观，符合业务操作习惯。提供明确的操作指引和状态提示。
* **可靠性：** 系统月度可用性不低于99.9%，核心业务流程7x24小时可用。

---

### 4. 采购流程图

#### 4.1 完整业务流程

```mermaid
graph TD
    A[采购员创建采购单] --> B{保存状态}
    B -->|保存草稿| C[草稿状态 - 可继续编辑]
    B -->|提交审核| D[待审核状态]

    C --> D
    D --> E{采购审核}
    E -->|审核通过| F[待询价状态]
    E -->|驳回| G[已驳回状态]

    G --> H[采购员修改后重新提交]
    H --> D

    F --> I[系统自动向供应商发送询价]
    I --> J[供应商在门户填写报价]
    J --> K{报价完成}
    K -->|所有供应商报价完成| L[已报价状态]
    K -->|部分报价中| M[等待其他供应商报价]
    M --> L

    L --> N[采购员查看报价并比价]
    N --> O[选择最优供应商]
    O --> P[提交订单]
    P --> Q[订单待审核状态]

    Q --> R{订单审核}
    R -->|审核通过| S[已下单状态]
    R -->|驳回| T[回到已报价状态]

    T --> N
    S --> U[供应商发货]
    U --> V[已完成状态]

    style A fill:#e1f5fe
    style D fill:#fff3e0
    style F fill:#f3e5f5
    style L fill:#e8f5e8
    style Q fill:#fff8e1
    style S fill:#e3f2fd
    style V fill:#f1f8e9
```

#### 4.2 状态说明

| 状态码 | 状态名称 | 状态描述 | 可执行操作 | 操作角色 |
|--------|----------|----------|-----------|----------|
| 1 | 草稿 | 采购单已创建但未提交 | 编辑、提交 | 采购员 |
| 2 | 待审核 | 采购单已提交，等待审核 | 审核通过、驳回 | 审核员 |
| 3 | 审核通过 | 审核通过，等待系统发送询价 | 系统自动操作 | 系统 |
| 4 | 已驳回 | 审核被驳回，可修改后重新提交 | 修改、重新提交 | 采购员 |
| 5 | 待询价 | 系统已发送询价，等待供应商报价 | 等待、催促 | 采购员/供应商 |
| 6 | 已报价 | 供应商已完成报价，可进行比价选择 | 查看报价、选择供应商、提交订单 | 采购员 |
| 7 | 订单待审核 | 已提交订单，等待最终审核 | 审核通过、驳回 | 审核员 |
| 8 | 已下单 | 订单审核通过，已正式下单 | 跟踪发货 | 采购员/供应商 |
| 9 | 已完成 | 订单履行完成 | 评价、归档 | 采购员 |

#### 4.3 关键业务规则

1. **双重审核机制**
   - 第一轮：采购单审核（审核需求合理性）
   - 第二轮：订单审核（审核供应商选择和价格合理性）

2. **供应商报价规则**
   - 每个询价单设置报价截止时间
   - 供应商只能看到自己的报价，无法看到其他供应商报价
   - 采购员只有在报价完成后才能看到所有报价

3. **状态流转规则**
   - 驳回后可以重新修改并提交
   - 订单驳回后回到已报价状态，可重新选择供应商
   - 每个状态变更都有完整的操作日志

4. **权限控制**
   - 采购员：只能查看自己创建的采购单
   - 审核员：可以查看所有需要审核的采购单
   - 供应商：只能查看与自己相关的询价和订单

---

### 5. 配件目录管理模块

#### 5.1 商品分类体系

系统支持两大类商品，采用不同的采购和报价模式：

##### 5.1.1 备件（标准配件）
* **定义：** 车辆维修保养所需的标准化配件，如机油滤清器、刹车片、火花塞等
* **特点：**
  - 商品类型相对固定，规格标准化
  - 不同供应商可提供相同规格的备件
  - 需要多供应商竞价报价
  - 价格波动相对较大，需要定期询价

##### 5.1.2 精品（增值商品）
* **定义：** 车辆美化、改装、个性化所需的非标准化商品，如车膜、脚垫、香水等
* **特点：**
  - 商品类型多样化且不固定，经常有新品
  - 不同供应商提供的精品通常是不同的（品牌、款式、规格）
  - 供应商提供固定报价，无需竞价询价
  - 价格相对稳定，按供应商目录价格采购

#### 5.2 配件目录结构设计

```
配件目录
├── 备件 (Parts)
│   ├── 发动机系统
│   │   ├── 机油滤清器
│   │   ├── 空气滤清器
│   │   └── 火花塞
│   ├── 制动系统
│   │   ├── 刹车片
│   │   ├── 刹车盘
│   │   └── 制动液
│   └── 传动系统
│       ├── 变速箱油
│       └── 传动带
└── 精品 (Accessories)
    ├── 车内饰品
    │   ├── 脚垫系列
    │   ├── 座套系列
    │   └── 香水系列
    ├── 车外装饰
    │   ├── 车膜系列
    │   ├── 轮毂系列
    │   └── 尾翼系列
    └── 电子设备
        ├── 行车记录仪
        ├── 导航设备
        └── 音响系统
```

#### 5.3 数据字段定义

##### 5.3.1 通用字段
| 字段名 | 字段类型 | 说明 | 必填 |
|--------|----------|------|------|
| part_id | String | 配件唯一标识 | 是 |
| part_code | String | 配件编码（展示用） | 是 |
| part_name | String | 配件名称 | 是 |
| category_type | Enum | 商品类型：PARTS(备件)/ACCESSORIES(精品) | 是 |
| category_path | String | 分类路径，如"备件>发动机系统>机油滤清器" | 是 |
| specification | String | 规格型号 | 是 |
| unit | String | 计量单位 | 是 |
| description | Text | 详细描述 | 否 |
| brand | String | 品牌 | 否 |
| create_time | DateTime | 创建时间 | 是 |
| status | Enum | 状态：ACTIVE(启用)/INACTIVE(停用) | 是 |

##### 5.3.2 备件专用字段
| 字段名 | 字段类型 | 说明 | 必填 |
|--------|----------|------|------|
| oem_number | String | 原厂件号 | 否 |
| applicable_models | Array | 适用车型列表 | 是 |
| historical_avg_price | Decimal | 历史平均价格（参考用） | 否 |
| min_suppliers | Integer | 最少询价供应商数量 | 是 |
| price_validity_days | Integer | 报价有效期（天数） | 是 |

##### 5.3.3 精品专用字段
| 字段名 | 字段类型 | 说明 | 必填 |
|--------|----------|------|------|
| supplier_id | String | 供应商ID（精品绑定特定供应商） | 是 |
| supplier_name | String | 供应商名称 | 是 |
| supplier_part_code | String | 供应商商品编码 | 是 |
| fixed_price | Decimal | 固定价格 | 是 |
| price_update_time | DateTime | 价格最后更新时间 | 是 |
| min_order_quantity | Integer | 最小起订量 | 是 |
| stock_status | Enum | 库存状态：IN_STOCK/OUT_OF_STOCK/DISCONTINUED | 是 |

#### 5.4 采购流程差异

##### 5.4.1 备件采购流程
```mermaid
graph TD
    A[采购员选择备件] --> B[系统自动匹配多个供应商]
    B --> C[提交采购单审核]
    C --> D[审核通过后发送询价]
    D --> E[多供应商竞价报价]
    E --> F[采购员比价选择供应商]
    F --> G[提交订单审核]
    G --> H[生成最终采购订单]

    style D fill:#f9f,stroke:#333,stroke-width:2px
    style E fill:#f9f,stroke:#333,stroke-width:2px
    style F fill:#f9f,stroke:#333,stroke-width:2px
```

##### 5.4.2 精品采购流程
```mermaid
graph TD
    A[采购员浏览精品目录] --> B[按供应商筛选商品]
    B --> C[选择精品并查看固定价格]
    C --> D[直接添加到采购单]
    D --> E[提交采购单审核]
    E --> F[审核通过直接生成订单]
    F --> G[发送给对应供应商]

    style C fill:#9f9,stroke:#333,stroke-width:2px
    style F fill:#9f9,stroke:#333,stroke-width:2px
```

#### 5.5 功能需求详细说明

##### 5.5.1 配件目录管理后台

**基础功能：**
1. **分类管理**
   - 支持多级分类创建和编辑
   - 分类与商品类型（备件/精品）绑定
   - 分类排序和状态管理

2. **备件管理**
   - 备件基础信息维护
   - 适用车型关联管理
   - 历史价格记录和分析
   - 供应商资质匹配规则设置

3. **精品管理**
   - 精品信息维护（包含供应商绑定）
   - 固定价格管理和更新
   - 库存状态同步
   - 新品上架审核流程

##### 5.5.2 采购端差异化体验

**备件采购：**
- 按车型筛选适用备件
- 显示历史采购均价作为参考
- 进入标准询价比价流程
- 支持技术规格对比

**精品采购：**
- 按供应商浏览商品目录
- 直接显示固定价格和库存状态
- 支持图片展示和详细描述
- 一键添加到购物车式采购

##### 5.5.3 供应商端差异化功能

**备件供应商：**
- 接收询价单并在线报价
- 查看竞争对手报价结果（脱敏）
- 历史中标率和价格走势分析

**精品供应商：**
- 管理自己的商品目录和价格
- 接收直接采购订单
- 库存状态实时更新
- 新品申请上架流程

#### 5.6 系统集成要求

1. **与现有系统对接**
   - 车型库数据同步
   - 供应商主数据管理
   - 库存管理系统集成

2. **数据同步机制**
   - 精品价格定期同步更新
   - 库存状态实时同步
   - 新品信息自动推送

3. **权限控制**
   - 不同角色看到不同商品目录
   - 备件和精品采购权限分离
   - 价格敏感信息访问控制

### 6. 未来迭代考虑

* **供应商管理模块：** 建立供应商准入、考核和分级体系。
* **数据分析报表：** 提供采购成本分析、供应商绩效、采购周期等报表。
* **库存联动接口：** 与集团现有库存管理系统集成，实现低库存自动生成采购建议。
* **移动端支持：** 开发App或H5页面，支持审批、关键状态查询等移动办公场景。
* **智能推荐：** 基于历史采购数据，为门店推荐常用备件和热销精品。

---
